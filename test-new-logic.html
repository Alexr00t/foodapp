<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test New Logic - Mobile Bar Charts</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <h1>Test New Logic - Mobile Bar Charts</h1>
    
    <div class="card">
      <h2>Noua Logică - Explicație</h2>
      <ul>
        <li><strong>Linia verticală la 50%</strong> = 100% din target</li>
        <li><strong>Consum zilnic verde</strong> până la 100%, roșu pentru >100%</li>
        <li><strong>Contribuția produsului</strong> cu nuanțe diferite (verde2/roșu2)</li>
        <li><strong>Overlay</strong> arată cum ar arăta consumul total după adăugarea produsului</li>
      </ul>
      
      <h3>Exemplu: Consum 78% + Produs 4% = 82%</h3>
      <p>78% verde + 4% verde2 (contribuția produsului)</p>
    </div>
    
    <div class="card">
      <h2>Test Mobile Bar Charts</h2>
      
      <!-- Test Case 1: Under target -->
      <div class="mobile-bar-chart">
        <h4>Test 1: Consum 78% + Produs 4% = 82% (sub target)</h4>
        <div class="mobile-bar-item">
          <div class="mobile-bar-label">Cal</div>
          <div class="mobile-bar-container" id="test1-cal">
            <div class="mobile-bar-fill" data-state="under" style="width: 156%;"></div>
            <div class="mobile-bar-target-line"></div>
            <div class="mobile-bar-contribution" data-state="under" style="width: 8%;"></div>
          </div>
          <div class="mobile-bar-value">80</div>
          <div class="mobile-bar-percentage">4%</div>
        </div>
      </div>
      
      <!-- Test Case 2: Over target -->
      <div class="mobile-bar-chart">
        <h4>Test 2: Consum 95% + Produs 10% = 105% (peste target)</h4>
        <div class="mobile-bar-item">
          <div class="mobile-bar-label">Prot</div>
          <div class="mobile-bar-container" id="test2-pro">
            <div class="mobile-bar-fill" data-state="under" style="width: 190%;"></div>
            <div class="mobile-bar-target-line"></div>
            <div class="mobile-bar-contribution" data-state="over" style="width: 20%;"></div>
          </div>
          <div class="mobile-bar-value">13</div>
          <div class="mobile-bar-percentage">10%</div>
        </div>
      </div>
      
      <!-- Test Case 3: Already over target -->
      <div class="mobile-bar-chart">
        <h4>Test 3: Consum 110% + Produs 5% = 115% (deja peste target)</h4>
        <div class="mobile-bar-item">
          <div class="mobile-bar-label">Carb</div>
          <div class="mobile-bar-container" id="test3-carb">
            <div class="mobile-bar-fill" data-state="over" style="width: 220%;"></div>
            <div class="mobile-bar-target-line"></div>
            <div class="mobile-bar-contribution" data-state="over" style="width: 10%;"></div>
          </div>
          <div class="mobile-bar-value">13</div>
          <div class="mobile-bar-percentage">5%</div>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Legenda Culori</h2>
      <div style="display: flex; gap: 20px; flex-wrap: wrap;">
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background: linear-gradient(90deg, var(--accent) 0%, #16a34a 100%); border-radius: 4px;"></div>
          <span>Consum zilnic (verde)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background: linear-gradient(90deg, #dc2626 0%, #ef4444 100%); border-radius: 4px;"></div>
          <span>Consum zilnic peste target (roșu)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background: linear-gradient(90deg, #10b981 0%, #059669 100%); border-radius: 4px;"></div>
          <span>Contribuția produsului (verde2)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background: linear-gradient(90deg, #b91c1c 0%, #991b1b 100%); border-radius: 4px;"></div>
          <span>Contribuția produsului peste target (roșu2)</span>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // Set target lines at 50% (represents 100% of target)
    document.addEventListener('DOMContentLoaded', () => {
      const targetLines = document.querySelectorAll('.mobile-bar-target-line');
      targetLines.forEach(line => {
        line.style.left = '50%';
      });
    });
  </script>
</body>
</html>
